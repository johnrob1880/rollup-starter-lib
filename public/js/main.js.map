{"version":3,"file":"main.js","sources":["../../node_modules/redom/dist/redom.es.js","../../src/rules.js","../../src/sheet.js","../../src/utils.js","../../src/classNames.js","../../src/cache.js","../../src/css.js","../../example/index.js"],"sourcesContent":["var HASH = '#'.charCodeAt(0);\nvar DOT = '.'.charCodeAt(0);\n\nvar TAG_NAME = 0;\nvar ID = 1;\nvar CLASS_NAME = 2;\n\nvar parseQuery = function (query) {\n  var tag = null;\n  var id = null;\n  var className = null;\n  var mode = TAG_NAME;\n  var offset = 0;\n\n  for (var i = 0; i <= query.length; i++) {\n    var char = query.charCodeAt(i);\n    var isHash = char === HASH;\n    var isDot = char === DOT;\n    var isEnd = !char;\n\n    if (isHash || isDot || isEnd) {\n      if (mode === TAG_NAME) {\n        if (i === 0) {\n          tag = 'div';\n        } else {\n          tag = query.substring(offset, i);\n        }\n      } else if (mode === ID) {\n        id = query.substring(offset, i);\n      } else {\n        if (className) {\n          className += ' ' + query.substring(offset, i);\n        } else {\n          className = query.substring(offset, i);\n        }\n      }\n\n      if (isHash) {\n        mode = ID;\n      } else if (isDot) {\n        mode = CLASS_NAME;\n      }\n\n      offset = i + 1;\n    }\n  }\n\n  return { tag: tag, id: id, className: className };\n};\n\nvar createElement = function (query, ns) {\n  var ref = parseQuery(query);\n  var tag = ref.tag;\n  var id = ref.id;\n  var className = ref.className;\n  var element = ns ? document.createElementNS(ns, tag) : document.createElement(tag);\n\n  if (id) {\n    element.id = id;\n  }\n\n  if (className) {\n    if (ns) {\n      element.setAttribute('class', className);\n    } else {\n      element.className = className;\n    }\n  }\n\n  return element;\n};\n\nvar unmount = function (parent, child) {\n  var parentEl = getEl(parent);\n  var childEl = getEl(child);\n\n  if (child === childEl && childEl.__redom_view) {\n    // try to look up the view if not provided\n    child = childEl.__redom_view;\n  }\n\n  if (childEl.parentNode) {\n    doUnmount(child, childEl, parentEl);\n\n    parentEl.removeChild(childEl);\n  }\n\n  return child;\n};\n\nvar doUnmount = function (child, childEl, parentEl) {\n  var hooks = childEl.__redom_lifecycle;\n\n  if (hooksAreEmpty(hooks)) {\n    childEl.__redom_mounted = false;\n    return;\n  }\n\n  var traverse = parentEl;\n\n  if (childEl.__redom_mounted) {\n    trigger(childEl, 'onunmount');\n  }\n\n  while (traverse) {\n    var parentHooks = traverse.__redom_lifecycle || {};\n\n    for (var hook in hooks) {\n      if (parentHooks[hook]) {\n        parentHooks[hook] -= hooks[hook];\n      }\n    }\n\n    if (hooksAreEmpty(parentHooks)) {\n      traverse.__redom_lifecycle = null;\n    }\n\n    traverse = traverse.parentNode;\n  }\n};\n\nvar hooksAreEmpty = function (hooks) {\n  if (hooks == null) {\n    return true;\n  }\n  for (var key in hooks) {\n    if (hooks[key]) {\n      return false;\n    }\n  }\n  return true;\n};\n\nvar hookNames = ['onmount', 'onremount', 'onunmount'];\nvar shadowRootAvailable = typeof window !== 'undefined' && 'ShadowRoot' in window;\n\nvar mount = function (parent, child, before, replace) {\n  var parentEl = getEl(parent);\n  var childEl = getEl(child);\n\n  if (child === childEl && childEl.__redom_view) {\n    // try to look up the view if not provided\n    child = childEl.__redom_view;\n  }\n\n  if (child !== childEl) {\n    childEl.__redom_view = child;\n  }\n\n  var wasMounted = childEl.__redom_mounted;\n  var oldParent = childEl.parentNode;\n\n  if (wasMounted && (oldParent !== parentEl)) {\n    doUnmount(child, childEl, oldParent);\n  }\n\n  if (before != null) {\n    if (replace) {\n      parentEl.replaceChild(childEl, getEl(before));\n    } else {\n      parentEl.insertBefore(childEl, getEl(before));\n    }\n  } else {\n    parentEl.appendChild(childEl);\n  }\n\n  doMount(child, childEl, parentEl, oldParent);\n\n  return child;\n};\n\nvar doMount = function (child, childEl, parentEl, oldParent) {\n  var hooks = childEl.__redom_lifecycle || (childEl.__redom_lifecycle = {});\n  var remount = (parentEl === oldParent);\n  var hooksFound = false;\n\n  for (var i = 0, list = hookNames; i < list.length; i += 1) {\n    var hookName = list[i];\n\n    if (!remount) { // if already mounted, skip this phase\n      if (child !== childEl) { // only Views can have lifecycle events\n        if (hookName in child) {\n          hooks[hookName] = (hooks[hookName] || 0) + 1;\n        }\n      }\n    }\n    if (hooks[hookName]) {\n      hooksFound = true;\n    }\n  }\n\n  if (!hooksFound) {\n    childEl.__redom_mounted = true;\n    return;\n  }\n\n  var traverse = parentEl;\n  var triggered = false;\n\n  if (remount || (traverse && traverse.__redom_mounted)) {\n    trigger(childEl, remount ? 'onremount' : 'onmount');\n    triggered = true;\n  }\n\n  while (traverse) {\n    var parent = traverse.parentNode;\n    var parentHooks = traverse.__redom_lifecycle || (traverse.__redom_lifecycle = {});\n\n    for (var hook in hooks) {\n      parentHooks[hook] = (parentHooks[hook] || 0) + hooks[hook];\n    }\n\n    if (triggered) {\n      break;\n    } else {\n      if (traverse === document ||\n        (shadowRootAvailable && (traverse instanceof window.ShadowRoot)) ||\n        (parent && parent.__redom_mounted)\n      ) {\n        trigger(traverse, remount ? 'onremount' : 'onmount');\n        triggered = true;\n      }\n      traverse = parent;\n    }\n  }\n};\n\nvar trigger = function (el, eventName) {\n  if (eventName === 'onmount' || eventName === 'onremount') {\n    el.__redom_mounted = true;\n  } else if (eventName === 'onunmount') {\n    el.__redom_mounted = false;\n  }\n\n  var hooks = el.__redom_lifecycle;\n\n  if (!hooks) {\n    return;\n  }\n\n  var view = el.__redom_view;\n  var hookCount = 0;\n\n  view && view[eventName] && view[eventName]();\n\n  for (var hook in hooks) {\n    if (hook) {\n      hookCount++;\n    }\n  }\n\n  if (hookCount) {\n    var traverse = el.firstChild;\n\n    while (traverse) {\n      var next = traverse.nextSibling;\n\n      trigger(traverse, eventName);\n\n      traverse = next;\n    }\n  }\n};\n\nvar setStyle = function (view, arg1, arg2) {\n  var el = getEl(view);\n\n  if (arg2 !== undefined) {\n    el.style[arg1] = arg2;\n  } else if (typeof arg1 === 'string') {\n    el.setAttribute('style', arg1);\n  } else {\n    for (var key in arg1) {\n      setStyle(el, key, arg1[key]);\n    }\n  }\n};\n\n/* global SVGElement */\n\nvar xlinkns = 'http://www.w3.org/1999/xlink';\n\nvar setAttr = function (view, arg1, arg2) {\n  var el = getEl(view);\n  var isSVG = el instanceof SVGElement;\n\n  var isFunc = typeof arg2 === 'function';\n\n  if (arg2 !== undefined) {\n    if (arg1 === 'style') {\n      setStyle(el, arg2);\n    } else if (isSVG && isFunc) {\n      el[arg1] = arg2;\n    } else if (arg1 === 'dataset') {\n      setData(el, arg2);\n    } else if (!isSVG && (arg1 in el || isFunc)) {\n      el[arg1] = arg2;\n    } else {\n      if (isSVG && (arg1 === 'xlink')) {\n        setXlink(el, arg2);\n        return;\n      }\n      el.setAttribute(arg1, arg2);\n    }\n  } else {\n    for (var key in arg1) {\n      setAttr(el, key, arg1[key]);\n    }\n  }\n};\n\nfunction setXlink (el, obj) {\n  for (var key in obj) {\n    el.setAttributeNS(xlinkns, key, obj[key]);\n  }\n}\n\nfunction setData (el, obj) {\n  for (var key in obj) {\n    el.dataset[key] = obj[key];\n  }\n}\n\nvar text = function (str) { return document.createTextNode((str != null) ? str : ''); };\n\nvar parseArguments = function (element, args) {\n  for (var i = 0, list = args; i < list.length; i += 1) {\n    var arg = list[i];\n\n    if (arg !== 0 && !arg) {\n      continue;\n    }\n\n    var type = typeof arg;\n\n    // support middleware\n    if (type === 'function') {\n      arg(element);\n    } else if (type === 'string' || type === 'number') {\n      element.appendChild(text(arg));\n    } else if (isNode(getEl(arg))) {\n      mount(element, arg);\n    } else if (arg.length) {\n      parseArguments(element, arg);\n    } else if (type === 'object') {\n      setAttr(element, arg);\n    }\n  }\n};\n\nvar ensureEl = function (parent) { return typeof parent === 'string' ? html(parent) : getEl(parent); };\nvar getEl = function (parent) { return (parent.nodeType && parent) || (!parent.el && parent) || getEl(parent.el); };\nvar isNode = function (a) { return a && a.nodeType; };\n\nvar htmlCache = {};\n\nvar memoizeHTML = function (query) { return htmlCache[query] || (htmlCache[query] = createElement(query)); };\n\nvar html = function (query) {\n  var args = [], len = arguments.length - 1;\n  while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n  var element;\n\n  var type = typeof query;\n\n  if (type === 'string') {\n    element = memoizeHTML(query).cloneNode(false);\n  } else if (isNode(query)) {\n    element = query.cloneNode(false);\n  } else if (type === 'function') {\n    var Query = query;\n    element = new (Function.prototype.bind.apply( Query, [ null ].concat( args) ));\n  } else {\n    throw new Error('At least one argument required');\n  }\n\n  parseArguments(getEl(element), args);\n\n  return element;\n};\n\nhtml.extend = function (query) {\n  var args = [], len = arguments.length - 1;\n  while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n  var clone = memoizeHTML(query);\n\n  return html.bind.apply(html, [ this, clone ].concat( args ));\n};\n\nvar el = html;\nvar h = html;\n\nvar setChildren = function (parent) {\n  var children = [], len = arguments.length - 1;\n  while ( len-- > 0 ) children[ len ] = arguments[ len + 1 ];\n\n  var parentEl = getEl(parent);\n  var current = traverse(parent, children, parentEl.firstChild);\n\n  while (current) {\n    var next = current.nextSibling;\n\n    unmount(parent, current);\n\n    current = next;\n  }\n};\n\nfunction traverse (parent, children, _current) {\n  var current = _current;\n\n  var childEls = new Array(children.length);\n\n  for (var i = 0; i < children.length; i++) {\n    childEls[i] = children[i] && getEl(children[i]);\n  }\n\n  for (var i$1 = 0; i$1 < children.length; i$1++) {\n    var child = children[i$1];\n\n    if (!child) {\n      continue;\n    }\n\n    var childEl = childEls[i$1];\n\n    if (childEl === current) {\n      current = current.nextSibling;\n      continue;\n    }\n\n    if (isNode(childEl)) {\n      var next = current && current.nextSibling;\n      var exists = child.__redom_index != null;\n      var replace = exists && next === childEls[i$1 + 1];\n\n      mount(parent, child, current, replace);\n\n      if (replace) {\n        current = next;\n      }\n\n      continue;\n    }\n\n    if (child.length != null) {\n      current = traverse(parent, child, current);\n    }\n  }\n\n  return current;\n}\n\nvar propKey = function (key) { return function (item) { return item[key]; }; };\n\nvar listPool = function (View, key, initData) {\n  return new ListPool(View, key, initData);\n};\n\nvar ListPool = function ListPool (View, key, initData) {\n  this.View = View;\n  this.initData = initData;\n  this.oldLookup = {};\n  this.lookup = {};\n  this.oldViews = [];\n  this.views = [];\n\n  if (key != null) {\n    this.key = typeof key === 'function' ? key : propKey(key);\n  }\n};\nListPool.prototype.update = function update (data, context) {\n  var ref = this;\n    var View = ref.View;\n    var key = ref.key;\n    var initData = ref.initData;\n  var keySet = key != null;\n\n  var oldLookup = this.lookup;\n  var newLookup = {};\n\n  var newViews = new Array(data.length);\n  var oldViews = this.views;\n\n  for (var i = 0; i < data.length; i++) {\n    var item = data[i];\n    var view = (void 0);\n\n    if (keySet) {\n      var id = key(item);\n\n      view = oldLookup[id] || new View(initData, item, i, data);\n      newLookup[id] = view;\n      view.__redom_id = id;\n    } else {\n      view = oldViews[i] || new View(initData, item, i, data);\n    }\n    view.update && view.update(item, i, data, context);\n\n    var el = getEl(view.el);\n\n    el.__redom_view = view;\n    newViews[i] = view;\n  }\n\n  this.oldViews = oldViews;\n  this.views = newViews;\n\n  this.oldLookup = oldLookup;\n  this.lookup = newLookup;\n};\n\nvar list = function (parent, View, key, initData) {\n  return new List(parent, View, key, initData);\n};\n\nvar List = function List (parent, View, key, initData) {\n  this.__redom_list = true;\n  this.View = View;\n  this.initData = initData;\n  this.views = [];\n  this.pool = new ListPool(View, key, initData);\n  this.el = ensureEl(parent);\n  this.keySet = key != null;\n};\nList.prototype.update = function update (data, context) {\n    if ( data === void 0 ) data = [];\n\n  var ref = this;\n    var keySet = ref.keySet;\n  var oldViews = this.views;\n\n  this.pool.update(data, context);\n\n  var ref$1 = this.pool;\n    var views = ref$1.views;\n    var lookup = ref$1.lookup;\n\n  if (keySet) {\n    for (var i = 0; i < oldViews.length; i++) {\n      var oldView = oldViews[i];\n      var id = oldView.__redom_id;\n\n      if (lookup[id] == null) {\n        oldView.__redom_index = null;\n        unmount(this, oldView);\n      }\n    }\n  }\n\n  for (var i$1 = 0; i$1 < views.length; i$1++) {\n    var view = views[i$1];\n\n    view.__redom_index = i$1;\n  }\n\n  setChildren(this, views);\n\n  if (keySet) {\n    this.lookup = lookup;\n  }\n  this.views = views;\n};\n\nList.extend = function (parent, View, key, initData) {\n  return List.bind(List, parent, View, key, initData);\n};\n\nlist.extend = List.extend;\n\n/* global Node */\n\nvar place = function (View, initData) {\n  return new Place(View, initData);\n};\n\nvar Place = function Place (View, initData) {\n  this.el = text('');\n  this.visible = false;\n  this.view = null;\n  this._placeholder = this.el;\n\n  if (View instanceof Node) {\n    this._el = View;\n  } else {\n    this._View = View;\n  }\n\n  this._initData = initData;\n};\nPlace.prototype.update = function update (visible, data) {\n  var placeholder = this._placeholder;\n  var parentNode = this.el.parentNode;\n\n  if (visible) {\n    if (!this.visible) {\n      if (this._el) {\n        mount(parentNode, this._el, placeholder);\n        unmount(parentNode, placeholder);\n\n        this.el = this._el;\n        this.visible = visible;\n\n        return;\n      }\n      var View = this._View;\n      var view = new View(this._initData);\n\n      this.el = getEl(view);\n      this.view = view;\n\n      mount(parentNode, view, placeholder);\n      unmount(parentNode, placeholder);\n    }\n    this.view && this.view.update && this.view.update(data);\n  } else {\n    if (this.visible) {\n      if (this._el) {\n        mount(parentNode, placeholder, this._el);\n        unmount(parentNode, this._el);\n\n        this.el = placeholder;\n        this.visible = visible;\n\n        return;\n      }\n      mount(parentNode, placeholder, this.view);\n      unmount(parentNode, this.view);\n\n      this.el = placeholder;\n      this.view = null;\n    }\n  }\n  this.visible = visible;\n};\n\nvar router = function (parent, Views, initData) {\n  return new Router(parent, Views, initData);\n};\n\nvar Router = function Router (parent, Views, initData) {\n  this.el = ensureEl(parent);\n  this.Views = Views;\n  this.initData = initData;\n};\nRouter.prototype.update = function update (route, data) {\n  if (route !== this.route) {\n    var Views = this.Views;\n    var View = Views[route];\n\n    this.route = route;\n    this.view = View && new View(this.initData, data);\n\n    setChildren(this.el, [ this.view ]);\n  }\n  this.view && this.view.update && this.view.update(data, route);\n};\n\nvar ns = 'http://www.w3.org/2000/svg';\n\nvar svgCache = {};\n\nvar memoizeSVG = function (query) { return svgCache[query] || (svgCache[query] = createElement(query, ns)); };\n\nvar svg = function (query) {\n  var args = [], len = arguments.length - 1;\n  while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n  var element;\n\n  var type = typeof query;\n\n  if (type === 'string') {\n    element = memoizeSVG(query).cloneNode(false);\n  } else if (isNode(query)) {\n    element = query.cloneNode(false);\n  } else if (type === 'function') {\n    var Query = query;\n    element = new (Function.prototype.bind.apply( Query, [ null ].concat( args) ));\n  } else {\n    throw new Error('At least one argument required');\n  }\n\n  parseArguments(getEl(element), args);\n\n  return element;\n};\n\nsvg.extend = function (query) {\n  var clone = memoizeSVG(query);\n\n  return svg.bind(this, clone);\n};\n\nsvg.ns = ns;\n\nvar s = svg;\n\nexport { el, h, html, list, List, listPool, ListPool, mount, unmount, place, Place, router, Router, setAttr, setStyle, setChildren, s, svg, text };\n","const compressRules = (str) => {\r\n    return str.replace(/(\\r\\n|\\n|\\r|(\\s\\s+))/gm, '').replace(/\\:(\\s)+/g, ':').replace(' {', '{')\r\n}\r\n\r\nconst stringifyRules = (rules, styleId) => {\r\n    let cssRules = [];\r\n\r\n    if (!Array.isArray(rules)) {\r\n        cssRules.push(rules);\r\n    } else {\r\n        cssRules = rules;\r\n    }\r\n\r\n    let strRules = cssRules.reduce((prev, current) => {\r\n        prev += compressRules(current.replace(/\\:this/g, `.${styleId}`));\r\n        return prev;\r\n    }, '')\r\n\r\n    return strRules;\r\n}\r\n\r\nconst buildRules = (strings, values) => {\r\n    let strCss = '';\r\n    for (let i = 0; i < strings.length; i++) {\r\n        if (i > 0) {\r\n            strCss += values[i - 1];\r\n        }\r\n        strCss += strings[i];\r\n    }\r\n    return strCss;\r\n}\r\n\r\nexport {\r\n    buildRules,\r\n    stringifyRules,\r\n    compressRules\r\n}","const createSheet = (id, rules) => {\r\n    let sheet = document.createElement('style');\r\n    sheet.type = 'text/css';\r\n    sheet.innerHTML = rules\r\n    sheet.id = id;\r\n\r\n    return sheet;\r\n}\r\n\r\nconst getSheet = (id) => {\r\n    let sheet;\r\n    Array.prototype.slice.call(document.head.getElementsByTagName('style')).forEach( s => {\r\n        if (s.id === id) {\r\n            sheet = s;\r\n        }\r\n    });\r\n    return sheet;\r\n}\r\n\r\nconst getSheets = () => {\r\n    return Array.prototype.slice.call(document.head.getElementsByTagName('style'));\r\n}\r\n\r\nexport { \r\n    createSheet,\r\n    getSheet,\r\n    getSheets\r\n}","const isString = (test) => typeof test === 'string' || test instanceof String;\r\nconst isObject = (test) => test && typeof test === 'object' && test.constructor === Object;\r\nconst isHtmlTag = (input) => {\r\n    return document.createElement(input).toString() != \"[object HTMLUnknownElement]\";\r\n}\r\nconst isElement = (target) => target instanceof Element || target instanceof HTMLDocument;\r\n\r\n\r\nexport {\r\n    isString,\r\n    isObject,\r\n    isHtmlTag,\r\n    isElement\r\n}","import { isString, isObject } from './utils';\r\n\r\nfunction classNames(...args) {\r\n    const classes=[];\r\n    let i, len = args.length, arg;\r\n    for (i = 0; i < len; i++) {\r\n        arg = args[i];\r\n        if (isString(arg)) {\r\n            classes.push(arg);\r\n        } else if (isObject(arg)) {\r\n            classes.push(classNames(...arg));\r\n        } else if (isObject(arg)) {\r\n            classes.push(classNames(...Object.keys(arg).filter(k => arg[k])));\r\n        }\r\n    }\r\n\r\n    return classes.join(' ');\r\n}\r\n\r\nexport default classNames;\r\n","const cssRules = new Map();\r\nconst globalRules = new Map();\r\nconst themes = new Map();\r\n\r\nexport default () => {\r\n    if (typeof window !== undefined) {\r\n        window.restyled = window.restyled || {};\r\n        window.restyled.cssRules = window.restyled.cssRules || new Map();\r\n        window.restyled.globalRules = window.restyled.globalRules || new Map();\r\n        window.restyled.themes = window.restyled.themes || new Map();\r\n\r\n        return window.restyled;\r\n    }\r\n\r\n    return {\r\n        cssRules,\r\n        globalRules,\r\n        themes\r\n    }\r\n}\r\n\r\n","import { buildRules, stringifyRules } from './rules';\r\nimport { createSheet, getSheet } from './sheet';\r\nimport { isHtmlTag, isElement } from './utils';\r\nimport classNames from './classNames';\r\nimport cache from './cache';\r\n\r\nconst css = (props) => (strings, ...values) => {\r\n    const { className, base } = props || {};\r\n    \r\n    if (cache().cssRules.has(className)) {\r\n        console.log(`warning: over-writing existing rules for ${className}. If this was not intended, use the base property.`);\r\n    }\r\n    let mergeBase = !!base;\r\n\r\n    let cls = className || `s_${Math.random().toString(36).substr(2, 9)}`;\r\n    let rules = stringifyRules(buildRules(strings, values), cls);\r\n    let originalRules = rules;\r\n    if (mergeBase) {\r\n        let baseRules = cache().cssRules.get(base) || '';\r\n        rules = mergeRules(base, baseRules, rules);\r\n    }\r\n\r\n    cache().cssRules.set(mergeBase ? base : cls, rules);\r\n    return styleProxy(cls, base, originalRules);\r\n}\r\n\r\nconst injectRules = (id) => {\r\n\r\n    const inject = (map, name) => {\r\n        console.log(`restyled: injecting ${map.size} ${name} rules.`);\r\n        map.forEach((value, key) => {\r\n            if (document.getElementById(key)) {            \r\n                return; // Already mounted\r\n            }\r\n            if (id && key !== id) {\r\n                return;\r\n            }\r\n            var sheet = createSheet(key, value);\r\n            document.head.appendChild(sheet);\r\n        });\r\n    }\r\n\r\n    // Global rules should be first in order to cascade properly\r\n    inject(cache().globalRules, 'global');\r\n    inject(cache().cssRules), 'css';    \r\n}\r\n\r\nconst unmountRules = (className, base) => {\r\n\r\n    //let allRules = new Map([..._globalRules, ..._cssRules]);\r\n\r\n    let styles = Array.prototype.slice.call(document.head.getElementsByTagName('style'), 0);\r\n\r\n    if (base) {\r\n        styles = styles.filter(f => f.id === base);\r\n    } else if (className) {\r\n        styles = styles.filter(f => f.id === className);\r\n    }\r\n\r\n    const unmount = (map) => {\r\n        console.log(`restyled: unmounting ${map.size} ${name} rules.`);\r\n        map.forEach((value, key) => {\r\n            var node = styles.filter(f => f.id === key)[0];\r\n    \r\n            if (node) {\r\n                if (base && base !== className) {\r\n                    let regExp = new RegExp(`\\.${base}${className}{[^}]*}`, 'gi');\r\n                    let matches = regExp.exec(node.innerHTML);\r\n                    Array.prototype.slice.call(matches,0).forEach( match => {\r\n                        node.innerHTML = node.innerHTML.replace(match, '');\r\n                    });\r\n                } else {\r\n                    document.head.removeChild(node);\r\n\r\n                    if (cache().cssRules.has(key)) {\r\n                        cache().cssRules.delete(key);\r\n                    } else if (cache().globalRules.has(key)) {\r\n                        cache().globalRules.delete(key);\r\n                    }\r\n                }\r\n            }        \r\n        });\r\n    }\r\n\r\n    unmount(cache().globalRules);\r\n    unmount(cache().cssRules);\r\n}\r\n\r\nconst extend = (el, prop, style, props) => {    \r\n    let rs = create(el);\r\n    let elem = rs[prop](Object.assign({}, props, {\r\n        className: classNames(style.className, props && props.className || '')\r\n    }));  \r\n    return elem;\r\n}\r\n\r\nconst themeProxy = (name) => {\r\n    return {\r\n        apply: () => {\r\n            let sheet;\r\n            cache().themes.forEach((value, key) => {\r\n                sheet = getSheet(key);\r\n                if (sheet) {\r\n                    sheet.parentNode.removeChild(sheet);\r\n                }\r\n            });\r\n            sheet = createSheet(name, cache().themes.get(name));\r\n            document.head.insertBefore(sheet, document.head.firstElementChild);\r\n            return name;\r\n        }\r\n    }\r\n}\r\n\r\nconst theme = (name) => (strings, ...values) => {\r\n    let rules = buildRules(strings, values);\r\n    rules = `:root{${stringifyRules(rules, name)}}`;\r\n    cache().themes.set(name, rules);\r\n    return themeProxy(name);\r\n}\r\n\r\nconst create = (el) => {\r\n\r\n    const cssHandler = {\r\n        get: function (obj, prop) {\r\n\r\n            if (prop === 'injectRules') {\r\n                return function () {\r\n                    return injectRules.apply(this, arguments);\r\n                }\r\n            }\r\n\r\n            if (prop === 'unmountRules') {\r\n                return function () {\r\n                   return unmountRules.apply(this, arguments);\r\n                }\r\n            }\r\n\r\n            if (prop === 'theme') {\r\n                return function () {\r\n                    return applyTheme.apply(this, arguments);\r\n                }\r\n            }\r\n\r\n            if (isHtmlTag(prop)) {\r\n\r\n                return (...props) => {\r\n\r\n                    let element = el(prop, props);\r\n\r\n                    return (strings, ...values) => {\r\n\r\n                        let style = css()(strings, values);\r\n\r\n                        element.classList.add(style.className);\r\n\r\n                        obj['_restyled'] = style.className;\r\n\r\n                        element.injectRules = () => injectRules.call(null, style.className);\r\n                        element.unmountRules = () => unmountRules.call(null, style.className);\r\n                        element.extend = extend.bind(null, el, prop, style);\r\n    \r\n                        return element;\r\n                    }\r\n                }                \r\n            }\r\n            return obj[prop];\r\n        }\r\n    }\r\n\r\n    const cssProxy = new Proxy(el, cssHandler);\r\n\r\n    return cssProxy;\r\n}\r\n\r\nconst selectorOrElement = (target) => {\r\n    if (typeof target === 'string') {\r\n        return Array.prototype.slice.call(document.querySelectorAll(target));\r\n    } else if (isElement(target)) {\r\n        return [target];\r\n    } else {\r\n        return Array.prototype.slice.call(target);\r\n    }\r\n}\r\n\r\nconst inlineStyle = (...rules) => {\r\n    let str = '';\r\n    (rules || []).forEach( rule => {\r\n        str += rule.replace(/^\\.[^\\{]+/g, '').replace(/\\}/g, '').replace(/\\{/g, '');\r\n    })\r\n    return str;\r\n}\r\n\r\nconst cssName = (name) => {\r\n    return name.replace(/-([a-z])/g, function (g) { return g[1].toUpperCase(); });    \r\n}\r\n\r\nconst styleObject = (...rules) => {\r\n    let style = {}\r\n    let styles = inlineStyle(...rules);\r\n    let arr = styles.split(';');\r\n    arr.filter(c => !!c).forEach(rule => {\r\n        let split = rule.split(':');\r\n        style[cssName(split[0])] = split[1];\r\n    })\r\n    return style;\r\n}\r\n\r\nconst styleProxy = (cls, base, rules) => {\r\n    return {\r\n        className: cls,\r\n        base: base, \r\n        rules: () => rules,\r\n        style: () => styleObject(rules),\r\n        inlineStyle: () => inlineStyle(rules),\r\n        injectRules: () => { injectRules.call(null, cls, base); return styleProxy(cls, base, rules) },\r\n        unmountRules: () => { unmountRules.call(null, cls, base); return styleProxy(cls, base, rules) },\r\n        applyRules: (el) => { selectorOrElement(el).forEach(elem => elem.classList.add(cls)); return styleProxy(cls, base, rules) },\r\n        create: (h) => { \r\n            return new Proxy(h, {\r\n            get: (obj, prop) => {\r\n                if (isHtmlTag(prop)) {\r\n                    return (...props) => {\r\n                        let element = h(prop, props);\r\n                        element.className = `${cls}${element.className ? ' ' + element.className : ''}`;\r\n                        return element;\r\n                    }\r\n                }\r\n                return obj[prop];\r\n            }\r\n        })}\r\n    }\r\n}\r\n\r\nconst mergeRules = (ns, ...rules) => {    \r\n    return (rules || []).reduce((prev, current) => {\r\n        prev += current.replace(':host', ns);\r\n        return prev;\r\n    }, '');\r\n}\r\n\r\nconst globalCss = cls => (strings, ...values) => {\r\n    let merge = false;\r\n    if (cls) {\r\n        if (cache().globalCss.has(cls)) {\r\n            merge = true;\r\n        }\r\n    }\r\n    let className = cls ||  `g_${Math.random().toString(36).substr(2, 9)}`;\r\n   \r\n    let rules = stringifyRules(buildRules(strings, values), className);\r\n\r\n    if (merge) {\r\n        rules = mergeRules(className, cache().globalRules.get(className), rules);\r\n    }\r\n\r\n    cache().globalRules.set(className, rules);    \r\n\r\n    return styleProxy(className);\r\n}\r\n\r\nexport {\r\n    css,\r\n    injectRules,\r\n    unmountRules,\r\n    create,\r\n    globalCss,\r\n    theme\r\n}","import { el, mount } from 'redom';\r\nimport { create, css, theme } from './../src/index';\r\n\r\nconst restyled = create(el);\r\n\r\nconst childStyle = css({\r\n    className: 'wild-style'\r\n})`\r\n:this {\r\n    border: 3px solid green;\r\n}\r\n`\r\nconst defaultTheme = theme('default')`\r\n    --primary-color: #dddddd;\r\n    --primary-color-active: #cccccc;\r\n    --text-on-primary: #000;\r\n    --text-on-primary-active: #000;\r\n`\r\nconst brightTheme = theme('bright')`\r\n    --primary-color: red;\r\n    --primary-color-active: maroon;\r\n    --text-on-primary: white;\r\n    --text-on-primary-active: yellow;\r\n`\r\n\r\n\r\nconst orangeLabel = css({className: 'label--orange', base: 'labels'})`\r\n    :this {\r\n        color: orange;\r\n        background-color: transparent;\r\n    }\r\n    :this:hover {\r\n        color: red;\r\n    }\r\n`\r\n\r\ncss({className: 'tropical-label'})`\r\n    :this {\r\n        display: inline-block;\r\n        border: 1px solid green;\r\n        padding: 6px 12px;\r\n    }\r\n    :this:hover {\r\n        color: purple;\r\n        background-color: ${orangeLabel.style().color};\r\n    }\r\n`;\r\n\r\nconst labelFactory = orangeLabel.create(el);\r\n\r\n// css factory example\r\nconst tropicalLabel  = labelFactory.label({\r\n    className: 'tropical-label', \r\n    textContent: 'Hola', \r\n    onclick: () => alert('hola')\r\n});\r\n\r\n\r\nconst blueLabel = css({className: 'label--blue', base: 'labels'})`\r\n    :this {\r\n        color: blue;        \r\n    }\r\n    :this:hover {\r\n        background-color: #ebebeb;\r\n    }\r\n`\r\n\r\n\r\nclass App {\r\n    constructor() {\r\n        this.el = el('.example', this.button = restyled.button({\r\n            textContent: 'Change Theme',\r\n            className: childStyle.className,\r\n            onclick: this.changeTheme.bind(this)\r\n        })`\r\n            :this {\r\n                background-color: var(--primary-color, #cdcdcd);\r\n                color: var(--text-on-primary, black);\r\n            }\r\n            :this:hover {\r\n                background-color: var(--primary-color-active, #dddddd);\r\n                color: var(--text-on-primary-active, black);\r\n            }\r\n        `, this.button2 = el('button.unstyled', {\r\n            textContent: 'Unstyled'\r\n        }),\r\n        this.button3 = this.button.extend({\r\n            textContent: 'Extended'\r\n        })`\r\n            :this {\r\n                padding: 20px;\r\n            }\r\n        `,\r\n        orangeLabel,\r\n        tropicalLabel,\r\n        el(`label.label--orange`, { textContent: 'Orange Label'}),\r\n        el(`label.${blueLabel.className}`, { textContent: 'Blue Label'})\r\n        );\r\n\r\n        this.theme = 'default';\r\n        \r\n    }\r\n    onmount() {\r\n        restyled.injectRules();\r\n        defaultTheme.apply();\r\n      \r\n    }\r\n    changeTheme() {\r\n      \r\n        if (this.theme === 'default') {\r\n            this.theme = brightTheme.apply();\r\n        } else {\r\n            this.theme = defaultTheme.apply();\r\n        }\r\n        let newStyle = css()`\r\n            :this {\r\n                background-color: yellow;\r\n                color: black;\r\n            }\r\n        `;\r\n       \r\n        newStyle.injectRules();\r\n        newStyle.applyRules(this.button2);\r\n        \r\n    }\r\n}\r\n\r\nmount(document.body, new App());"],"names":["compressRules","str","replace","stringifyRules","rules","styleId","cssRules","Array","isArray","push","strRules","reduce","prev","current","buildRules","strings","values","strCss","i","length","createSheet","id","sheet","document","createElement","type","innerHTML","getSheet","prototype","slice","call","head","getElementsByTagName","forEach","s","isString","test","String","isObject","constructor","Object","isHtmlTag","input","toString","isElement","target","Element","HTMLDocument","classNames","args","classes","len","arg","keys","filter","k","join","Map","globalRules","themes","window","undefined","restyled","css","props","className","base","cache","has","console","log","mergeBase","cls","Math","random","substr","originalRules","baseRules","get","mergeRules","set","styleProxy","injectRules","inject","map","name","size","value","key","getElementById","appendChild","unmountRules","styles","f","unmount","node","regExp","RegExp","matches","exec","match","removeChild","delete","extend","el","prop","style","rs","create","elem","assign","themeProxy","apply","parentNode","insertBefore","firstElementChild","theme","cssHandler","obj","arguments","applyTheme","element","classList","add","bind","cssProxy","Proxy","selectorOrElement","querySelectorAll","inlineStyle","rule","cssName","g","toUpperCase","styleObject","arr","split","c","applyRules","h","ns","childStyle","defaultTheme","brightTheme","orangeLabel","color","labelFactory","tropicalLabel","label","textContent","onclick","alert","blueLabel","App","button","changeTheme","button2","button3","onmount","newStyle","mount","body"],"mappings":"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"}